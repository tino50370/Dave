[
  {
    "name": "readFiles",
    "description": "Read files from a GitHub repository by owner/repo or repo_url at a given ref (branch/tag/SHA). Returns UTF-8 text or base64 for non-text.",
    "inputSchema": {
      "type": "object",
      "required": ["paths"],
      "properties": {
        "provider": { "type": "string", "description": "Only 'github' is supported." },
        "owner":    { "type": "string", "description": "GitHub org/user (use with 'repo')." },
        "repo":     { "type": "string", "description": "GitHub repository name." },
        "repo_url": { "type": "string", "description": "Alternative to owner/repo, e.g., https://github.com/octocat/Hello-World" },
        "ref":      { "type": "string", "description": "Branch, tag, or commit SHA (default: main)." },
        "paths": {
          "type": "array",
          "items": { "type": "string", "description": "Path relative to repo root, e.g., 'src/app.py'." }
        }
      },
      "description": "Provide either (owner & repo) or repo_url. Lambda will validate this."
    },
    "outputSchema": {
      "type": "object",
      "required": ["results"],
      "properties": {
        "provider": { "type": "string" },
        "owner":    { "type": "string" },
        "repo":     { "type": "string" },
        "ref":      { "type": "string" },
        "results": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["path", "source_url"],
            "properties": {
              "path":       { "type": "string" },
              "source_url": { "type": "string" },
              "encoding":   { "type": "string", "description": "utf-8 for text; base64 for binary." },
              "length":     { "type": "integer" },
              "content":    { "type": "string", "description": "File contents (text or base64 string)." },
              "error":      { "type": "string", "description": "Error message if fetch failed." }
            }
          }
        }
      },
      "description": "Results for each requested path."
    }
  }
]